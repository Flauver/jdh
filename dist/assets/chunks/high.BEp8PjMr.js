import{x as Oe,Q as Le,s as U,d as X,r as $e,w as le,e as L,f as D,z as I,J as se,h as je,i as Z,t as J,m as q,n as Ae,S as ze,o as ce,k as ue,u as F,l as De,a7 as We,aa as Ue,j as Ve,a1 as Ze}from"./framework.txdTbKYm.js";import{u as de}from"./theme.CmNhKudt.js";const ie={},K={};async function qe(x){if(x in K)return K[x];let s=x;x[0]==="/"&&(s=Oe(x));try{const n=await(await fetch(s)).json();return K[x]=n,n}catch(f){throw f instanceof Error&&alert(`Êó†Ê≥ï‰∏ãËΩΩÊàñËß£Êûê„Ää${x}„ÄãÊñá‰ª∂Ôºö${f.cause}`),f}}function he(){const s=Le().path.split("/");return s[1]==="yima"?s[2]:s[1]}function Je(x,s){if(s.length<100)throw new Error(`Âç°ÁâáËá≥Â∞ë100Âº†Ôºö${s.length}`);const f=()=>Array.from({length:s.length},(C,S)=>[-1,S]),n=de(`yima_${x}_records`,f),y=s.length;if(n.value.length<y)for(let C=n.value.length;C<y;C++)n.value.push([-1,C]);else n.value.length>y&&(n.value=n.value.filter(C=>C[1]<y));n.value.sort((C,S)=>C[0]===8&&S[0]<8?1:S[0]===8&&C[0]<8?-1:0);const h=U(n.value.reduce((C,S)=>C+ +(S[0]>1),0)),_=U(s[n.value[0][1]]),b=U(n.value[0][0]===-1),B=()=>{n.value=f(),h.value=0,b.value=!0,_.value=s[0]},N=s.length-1,j=[3,9,21,36,60,100],P=j.length-1;return{progress:h,card:_,isFirst:b,restart:B,answer:C=>{if(!C){n.value[0][0]>1&&(h.value-=1),n.value[0][0]=-1,b.value=!0;return}const S=n.value[0],p=++S[0];p===2&&(h.value+=1);let A=0;p>P?(S[0]=8,A=N):(A=j[p],A>N&&(A=N)),n.value.copyWithin(0,1,A+1),n.value[A]=S,_.value=s[n.value[0][1]],b.value=n.value[0][0]===-1}}}var Y={};(function x(s,f,n,y){var v=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",_=function(){if(!s.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var r=a.transferToImageBitmap();try{e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function b(){}function B(a){var e=f.exports.Promise,r=e!==void 0?e:s.Promise;return typeof r=="function"?new r(a):(a(b,b),null)}var N=function(a,e){return{transform:function(r){if(a)return r;if(e.has(r))return e.get(r);var o=new OffscreenCanvas(r.width,r.height),i=o.getContext("2d");return i.drawImage(r,0,0),e.set(r,o),o},clear:function(){e.clear()}}}(_,new Map),j=function(){var a=Math.floor(16.666666666666668),e,r,o={},i=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(l){var c=Math.random();return o[c]=requestAnimationFrame(function t(u){i===u||i+a-1<u?(i=u,delete o[c],l()):o[c]=requestAnimationFrame(t)}),c},r=function(l){o[l]&&cancelAnimationFrame(o[l])}):(e=function(l){return setTimeout(l,a)},r=function(l){return clearTimeout(l)}),{frame:e,cancel:r}}(),P=function(){var a,e,r={};function o(i){function l(c,t){i.postMessage({options:c||{},callback:t})}i.init=function(t){var u=t.transferControlToOffscreen();i.postMessage({canvas:u},[u])},i.fire=function(t,u,m){if(e)return l(t,null),e;var M=Math.random().toString(36).slice(2);return e=B(function(g){function w(k){k.data.callback===M&&(delete r[M],i.removeEventListener("message",w),e=null,N.clear(),m(),g())}i.addEventListener("message",w),l(t,M),r[M]=w.bind(null,{data:{callback:M}})}),e},i.reset=function(){i.postMessage({reset:!0});for(var t in r)r[t](),delete r[t]}}return function(){if(a)return a;if(!n&&v){var i=["var CONFETTI, SIZE = {}, module = {};","("+x.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([i])))}catch(l){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",l),null}o(a)}return a}}(),V={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(a,e){return e?e(a):a}function S(a){return a!=null}function p(a,e,r){return C(a&&S(a[e])?a[e]:V[e],r)}function A(a){return a<0?0:Math.floor(a)}function fe(a,e){return Math.floor(Math.random()*(e-a))+a}function H(a){return parseInt(a,16)}function ve(a){return a.map(me)}function me(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:H(e.substring(0,2)),g:H(e.substring(2,4)),b:H(e.substring(4,6))}}function ge(a){var e=p(a,"origin",Object);return e.x=p(e,"x",Number),e.y=p(e,"y",Number),e}function pe(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function ye(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function be(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function Me(a,e,r,o,i,l,c,t,u){a.save(),a.translate(e,r),a.rotate(l),a.scale(o,i),a.arc(0,0,1,c,t,u),a.restore()}function we(a){var e=a.angle*(Math.PI/180),r=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function xe(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,o=e.x+e.random*e.tiltCos,i=e.y+e.random*e.tiltSin,l=e.wobbleX+e.random*e.tiltCos,c=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",a.beginPath(),h&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(ke(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(l-o)*.1,Math.abs(c-i)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var t=Math.PI/10*e.wobble,u=Math.abs(l-o)*.1,m=Math.abs(c-i)*.1,M=e.shape.bitmap.width*e.scalar,g=e.shape.bitmap.height*e.scalar,w=new DOMMatrix([Math.cos(t)*u,Math.sin(t)*u,-Math.sin(t)*m,Math.cos(t)*m,e.x,e.y]);w.multiplySelf(new DOMMatrix(e.shape.matrix));var k=a.createPattern(N.transform(e.shape.bitmap),"no-repeat");k.setTransform(w),a.globalAlpha=1-r,a.fillStyle=k,a.fillRect(e.x-M/2,e.y-g/2,M,g),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(l-o)*e.ovalScalar,Math.abs(c-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):Me(a,e.x,e.y,Math.abs(l-o)*e.ovalScalar,Math.abs(c-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var d=Math.PI/2*3,T=4*e.scalar,E=8*e.scalar,R=e.x,$=e.y,W=5,O=Math.PI/W;W--;)R=e.x+Math.cos(d)*E,$=e.y+Math.sin(d)*E,a.lineTo(R,$),d+=O,R=e.x+Math.cos(d)*T,$=e.y+Math.sin(d)*T,a.lineTo(R,$),d+=O;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(i)),a.lineTo(Math.floor(l),Math.floor(c)),a.lineTo(Math.floor(o),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function Ce(a,e,r,o,i){var l=e.slice(),c=a.getContext("2d"),t,u,m=B(function(M){function g(){t=u=null,c.clearRect(0,0,o.width,o.height),N.clear(),i(),M()}function w(){n&&!(o.width===y.width&&o.height===y.height)&&(o.width=a.width=y.width,o.height=a.height=y.height),!o.width&&!o.height&&(r(a),o.width=a.width,o.height=a.height),c.clearRect(0,0,o.width,o.height),l=l.filter(function(k){return xe(c,k)}),l.length?t=j.frame(w):g()}t=j.frame(w),u=g});return{addFettis:function(M){return l=l.concat(M),m},canvas:a,promise:m,reset:function(){t&&j.cancel(t),u&&u()}}}function ee(a,e){var r=!a,o=!!p(e||{},"resize"),i=!1,l=p(e,"disableForReducedMotion",Boolean),c=v&&!!p(e||{},"useWorker"),t=c?P():null,u=r?pe:ye,m=a&&t?!!a.__confetti_initialized:!1,M=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,g;function w(d,T,E){for(var R=p(d,"particleCount",A),$=p(d,"angle",Number),W=p(d,"spread",Number),O=p(d,"startVelocity",Number),Fe=p(d,"decay",Number),Ie=p(d,"gravity",Number),Pe=p(d,"drift",Number),re=p(d,"colors",ve),Se=p(d,"ticks",Number),te=p(d,"shapes"),Ee=p(d,"scalar"),Re=!!p(d,"flat"),ne=ge(d),oe=R,G=[],Be=a.width*ne.x,Ne=a.height*ne.y;oe--;)G.push(we({x:Be,y:Ne,angle:$,spread:W,startVelocity:O,color:re[oe%re.length],shape:te[fe(0,te.length)],ticks:Se,decay:Fe,gravity:Ie,drift:Pe,scalar:Ee,flat:Re}));return g?g.addFettis(G):(g=Ce(a,G,u,T,E),g.promise)}function k(d){var T=l||p(d,"disableForReducedMotion",Boolean),E=p(d,"zIndex",Number);if(T&&M)return B(function(O){O()});r&&g?a=g.canvas:r&&!a&&(a=be(E),document.body.appendChild(a)),o&&!m&&u(a);var R={width:a.width,height:a.height};t&&!m&&t.init(a),m=!0,t&&(a.__confetti_initialized=!0);function $(){if(t){var O={getBoundingClientRect:function(){if(!r)return a.getBoundingClientRect()}};u(O),t.postMessage({resize:{width:O.width,height:O.height}});return}R.width=R.height=null}function W(){g=null,o&&(i=!1,s.removeEventListener("resize",$)),r&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,m=!1)}return o&&!i&&(i=!0,s.addEventListener("resize",$,!1)),t?t.fire(d,R,W):w(d,R,W)}return k.reset=function(){t&&t.reset(),g&&g.reset()},k}var Q;function ae(){return Q||(Q=ee(null,{useWorker:!0,resize:!0})),Q}function ke(a,e,r,o,i,l,c){var t=new Path2D(a),u=new Path2D;u.addPath(t,new DOMMatrix(e));var m=new Path2D;return m.addPath(u,new DOMMatrix([Math.cos(c)*i,Math.sin(c)*i,-Math.sin(c)*l,Math.cos(c)*l,r,o])),m}function _e(a){if(!h)throw new Error("path confetti are not supported in this browser");var e,r;typeof a=="string"?e=a:(e=a.path,r=a.matrix);var o=new Path2D(e),i=document.createElement("canvas"),l=i.getContext("2d");if(!r){for(var c=1e3,t=c,u=c,m=0,M=0,g,w,k=0;k<c;k+=2)for(var d=0;d<c;d+=2)l.isPointInPath(o,k,d,"nonzero")&&(t=Math.min(t,k),u=Math.min(u,d),m=Math.max(m,k),M=Math.max(M,d));g=m-t,w=M-u;var T=10,E=Math.min(T/g,T/w);r=[E,0,0,E,-Math.round(g/2+t)*E,-Math.round(w/2+u)*E]}return{type:"path",path:e,matrix:r}}function Te(a){var e,r=1,o="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,r="scalar"in a?a.scalar:r,i="fontFamily"in a?a.fontFamily:i,o="color"in a?a.color:o);var l=10*r,c=""+l+"px "+i,t=new OffscreenCanvas(l,l),u=t.getContext("2d");u.font=c;var m=u.measureText(e),M=Math.ceil(m.actualBoundingBoxRight+m.actualBoundingBoxLeft),g=Math.ceil(m.actualBoundingBoxAscent+m.actualBoundingBoxDescent),w=2,k=m.actualBoundingBoxLeft+w,d=m.actualBoundingBoxAscent+w;M+=w+w,g+=w+w,t=new OffscreenCanvas(M,g),u=t.getContext("2d"),u.font=c,u.fillStyle=o,u.fillText(e,k,d);var T=1/r;return{type:"bitmap",bitmap:t.transferToImageBitmap(),matrix:[T,0,0,T,-M*T/2,-g*T/2]}}f.exports=function(){return ae().apply(this,arguments)},f.exports.reset=function(){ae().reset()},f.exports.create=ee,f.exports.shapeFromPath=_e,f.exports.shapeFromText=Te})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Y,!1);const z=Y.exports;Y.exports.create;function He(){var x=5e3,s=Date.now()+x,f={startVelocity:30,spread:360,ticks:60,zIndex:0,particleCount:30,shapes:[z.shapeFromText({text:"Âø´",scalar:7}),z.shapeFromText({text:"Âº∫",scalar:8}),z.shapeFromText({text:"üòÜ",scalar:4}),z.shapeFromText({text:"üéâ",scalar:5}),z.shapeFromText({text:"üëç",scalar:5})],scalar:2};function n(v,h){return Math.random()*(h-v)+v}var y=setInterval(function(){var v=s-Date.now();if(v<=0)return clearInterval(y);var h=50*(v/x);z({...f,particleCount:h,origin:{x:n(.1,.3),y:Math.random()-.2}}),z({...f,particleCount:h,origin:{x:n(.7,.9),y:Math.random()-.2}}),z({...f,shapes:["circle"],particleCount:h,origin:{x:n(.7,.9),y:Math.random()-.2}})},250)}const Qe={class:"flex justify-center mb-24"},Ge=["value","max"],Ke=I("div",{class:"p-10 text-6xl text-center font-bold text-orange-800 font-sans tracking-widest -rotate-6"}," üéâÊÅ≠ÂñúÂÆåÊàêÁªÉ‰π†!!",-1),Xe={class:"flex justify-center mt-10"},Ye={key:0,class:"text-gray-500 flex justify-between"},ea={class:"text-gray-500"},aa=X({__name:"CardLayout",props:{id:{},progress:{},max:{},isCorrect:{type:Boolean}},emits:["restart"],setup(x){const s=x,f=s.id||he(),n=de(`yima_${f}-complete`,!1),y=$e(!1);return le(()=>s.progress,async(v,h)=>{!n.value&&v===s.max&&v>h&&(n.value=!0,y.value=!0,await Ae(),He())}),(v,h)=>(L(),D(se,null,[I("div",{class:Z(["md:w-2/3 w-full shadow-sm my-12 pb-24 bg-opacity-10 transition-color rounded-md",{"bg-red-700":!v.isCorrect,"bg-slate-500":v.isCorrect}])},[I("div",Qe,[I("progress",{class:"progress w-full",value:v.progress,max:v.max},null,8,Ge)]),y.value?(L(),D(se,{key:0},[Ke,I("div",Xe,[I("button",{class:"btn btn-success",onClick:h[0]||(h[0]=_=>y.value=!1)},"ÁªßÁª≠ÁªÉ‰π†")])],64)):je(v.$slots,"default",{key:1})],2),y.value?q("",!0):(L(),D("div",Ye,[I("div",ea,"ËÆ≠ÁªÉËøõÂ∫¶Ôºö "+J(v.progress)+" / "+J(v.max),1),I("button",{class:"btn btn-ghost btn-sm font-light",onClick:h[1]||(h[1]=_=>v.$emit("restart"))},"restart")]))],64))}}),ra={class:"flex justify-around mb-8"},ta={key:0,class:"flex flex-col"},na={key:0,class:"tracking-widest pt-6 text-blue-600 dark:text-blue-300"},oa={key:1,class:"tracking-widest pt-6 text-blue-600 dark:text-blue-300"},sa={class:"flex justify-center p-5"},ia={class:"font-mono"},la=X({__name:"TrainCard",props:{cards:{},id:{}},setup(x){const s=x,f=ze("font")||"outi-yima",{card:n,restart:y,answer:v,progress:h,isFirst:_}=Je(s.id,s.cards),b=U(!0),B=U(""),N=()=>{const P=document.getElementById("input_el");P==null||P.focus()};ce(()=>{N()});function j(){confirm("ÈáçÁΩÆËøõÂ∫¶ÈúÄË¶ÅÊ∏ÖÁ©∫Êï∞ÊçÆÔºåÊó†Ê≥ïÊí§ÂõûÔºåÊÇ®Á°ÆÂÆöÁªßÁª≠ÂêóÔºü")&&(y(),N())}return le(B,P=>{P.length<n.value.key.length||(P===n.value.key?(v(!0),b.value=!0):(v(!1),b.value=!1),B.value="")}),(P,V)=>(L(),ue(aa,{progress:F(h),max:P.cards.length,isCorrect:b.value,id:P.id,onRestart:j},{default:De(()=>[I("div",ra,[I("div",{class:Z(["text-6xl animate__animated",F(f),{"text-red-400":!b.value,animate__headShake:!b.value}])},J(F(n).name),3),"rel"in F(n)||"kind"in F(n)?(L(),D("div",ta,["kind"in F(n)&&F(n).kind=="b"?(L(),D("div",na," ‰∫î‰∏™Âü∫Á°ÄÁ¨îÁîª")):q("",!0),"kind"in F(n)&&F(n).kind=="eb"?(L(),D("div",oa," 25‰∏™‰∫åÁ¨îÂ∞èÁ†Å")):q("",!0)])):q("",!0)]),I("div",sa,[We(I("input",{id:"input_el",type:"text",placeholder:"ËæìÂÖ•ÁºñÁ†Å","onUpdate:modelValue":V[0]||(V[0]=C=>B.value=C),class:Z(["input w-half max-w-xs input-bordered text-center input-sm dark:bg-slate-800 bg-white",{"input-error":!b.value}])},null,2),[[Ue,B.value]])]),I("div",{class:Z(["text-center",{"opacity-0":!F(_)}])},[Ve("Á≠îÊ°àÊòØ "),I("b",ia,J(F(n).key),1),"comp"in F(n)?(L(),D("span",{key:0,class:Z([F(f)])}," Ôºà"+J(F(n).comp)+"Ôºâ",3)):q("",!0)],2)]),_:1},8,["progress","max","isCorrect","id"]))}}),ca={key:1,class:"text-gray-700 text-center"},ha=X({__name:"TrainZigen",props:{name:{},zigenJson:{},zigenFont:{},trainSecondary:{type:Boolean}},setup(x){const s=x;Ze("font",s.zigenFont);const f=he(),y=`${s.name||f}_gen`,v=(_,b)=>_||`/${f}/${b}.json`,h=U(ie[y]);return ce(async()=>{if(h.value)return;const _=await qe(v(s.zigenJson,"zigen"));s.trainSecondary?h.value=_.filter(b=>"secondary"in b).map(b=>({...b,key:b.secondary})):h.value=_,ie[y]=h.value}),(_,b)=>h.value?(L(),ue(la,{key:0,id:y,cards:h.value},null,8,["cards"])):(L(),D("h2",ca," ‰∏ãËΩΩÊï∞ÊçÆ‰∏≠‚Ä¶‚Ä¶ "))}}),fa="ÓÇöÓÇ°ÓÇ¢ÓÇ£ÓÇ†ÓÇõÓÇúÓÇùÓÇûÓÇüÓÇ§ÓÇ•ÓÇßÓÇ¶ÓÇ®ÓÇ≠ÓÇ¨ÓÇ´ÓÇ™ÓÇ©ÓÇñÓÇóÓÇòÓÇôÓÇï";export{ha as _,fa as h};
